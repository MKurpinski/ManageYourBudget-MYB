@model ManageYourBudget.Dtos.Expenditure.ExpenditureCategoryDto

@{
    var action = Url.Action("Edit", "Category");

    <form onsubmit="event.preventDefault(), submitForm(this, '@action', @Model.Id)">
        <div class="row">
            <div class="col-md-6 col-md-offset-2">
                @Html.HiddenFor(m => m.Id)
                @Html.HiddenFor(m => m.UserId)
                @Html.TextBoxFor(model => Model.Name, new { @class = "form-control", required = "required" })
            </div>
            <div class="col-md-2">@Html.TextBoxFor(model => Model.ChartColor, new { @class = "form-control", type = "color", required = "required" })</div>
            <div class="col-md-2">
                <input type="submit" class="btn btn-success" id="@Model.Id" value="Save" />
            </div>
        </div>
    </form>

}

<script>
    var submitForm = function (event, action, id) {
        if ($(event).valid && $(event).valid()) {
            var formData = $(event).serialize();
            $.ajax({
                url: action,
                method: "POST",
                data: formData,
                success: function () {
                    $("#" + id).val("Saved!");
                    setTimeout(function () {
                        $("#" + id).val("Save");
                    },
                        2000);
                }
            });
        }
     }
</script>



